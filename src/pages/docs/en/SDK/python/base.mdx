---
title: Base
position: 0
layout: "@docs"
---

> ℹ️ Deta Bases are created for you automatically when you start using them.

### Put

```py
def put(
    data: dict | list | str | int | float | bool,
    key: str | None = None,
    *,
    expire_in: int | None = None,
    expire_at: int | float | datetime | None = None,
)
```

`put` is the fastest way to store an item in the database.
If an item already exists under a given key, put will replace this item.
In the case you do not provide us with a key, we will auto generate a 12 char long string as a key.

| Name        | Type                                                                                    | Description                                                                                                                                                                                                        |
| ----------- | --------------------------------------------------------------------------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ |
| `data`      | `dict`, `str`, [`int`](#storing-numbers), [`float`](#storing-numbers), `bool` or `list` | The data to be stored.                                                                                                                                                                                             |
| `key`       | `str` or `None`                                                                         | The key (aka ID) to store the data under. Will be auto generated if not provided.                                                                                                                                  |
| `expire_in` | `int` or `None`                                                                         | Seconds after which the item will expire in, see also [expiring items](./expiring_items).                                                                                                                          |
| `expire_at` | `int`, `float`, `datetime` or `None`                                                    | Time at which the item will expire in, can provide the timestamp directly (`int` or `float`) or a [datetime](https://docs.python.org/3/library/datetime.html) object, see also [expiring items](./expiring_items). |

`put` returns the item on a successful put, otherwise it raises an error.

### Get

```py
def get(key: str) -> FetchResponse:
```

`get` retrieves an item from the database by it's `key`.

#### Parameters

| Name  | Type  | Description                      |
| ----- | ----- | -------------------------------- |
| `key` | `str` | The key of the item to retrieve. |

#### Returns

If the record is found:

```py
{
    "name": "alex",
    "age": 77,
    "key": "one",
}
```

If not found, the function will return `None`.

### Delete

`delete` deletes an item from the database that matches the key provided.

```py
delete(key: str)
```

#### Parameters

| Name  | Type  | Description                    |
| ----- | ----- | ------------------------------ |
| `key` | `str` | The key of the item to delete. |

#### Returns

Always returns `None`, even if the key does not exist.

### Insert

```py
insert(
    data: dict | list | str | int | float | bool,
    key: str | None = None,
    *,
    expire_in: int | None = None,
    expire_at: int | float | datetime | None = None,
)
```

The `insert` method inserts a single item into a **Base**, but is unique from [`put`](#put) in that it will raise an error of the `key` already exists in the database.

> ℹ️ `insert` is roughly 2x slower than [`put`](#put).

#### Parameters

| Name        | Type                                                                                    | Description                                                                                                                                                                                                        |
| ----------- | --------------------------------------------------------------------------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ |
| `data`      | `dict`, `str`, [`int`](#storing-numbers), [`float`](#storing-numbers), `bool` or `list` | The data to be stored.                                                                                                                                                                                             |
| `key`       | `str` or `None`                                                                         | The key (aka ID) to store the data under. Will be auto generated if not provided.                                                                                                                                  |
| `expire_in` | `int` or `None`                                                                         | Seconds after which the item will expire in, see also [expiring items](./expiring_items).                                                                                                                          |
| `expire_at` | `int`, `float`, `datetime` or `None`                                                    | Time at which the item will expire in, can provide the timestamp directly (`int` or `float`) or a [datetime](https://docs.python.org/3/library/datetime.html) object, see also [expiring items](./expiring_items). |

#### Returns

Returns the item on a successful insert, and throws an error if the key already exists.

### Put Many

```py
put_many(
    items: list,
    *,
    expire_in: int | None = None,
    expire_at: int | float | datetime | None = None,
)
```

The Put Many method puts up to 25 items into a Base at once on a single call.

#### Parameters

| Name        | Type                                 | Description                                                                                                                                                                                                        |
| ----------- | ------------------------------------ | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ |
| `items`     | `list`                               | The list of items to be stored.                                                                                                                                                                                    |
| `expire_in` | `int` or `None`                      | Seconds after which the item will expire in, see also [expiring items](./expiring_items).                                                                                                                          |
| `expire_at` | `int`, `float`, `datetime` or `None` | Time at which the item will expire in, can provide the timestamp directly (`int` or `float`) or a [datetime](https://docs.python.org/3/library/datetime.html) object, see also [expiring items](./expiring_items). |

#### Returns

Returns a dict with `processed` and `failed` (if any) items.

### Update

```py
update(
    updates: dict,
    key: str,
    *,
    expire_in: int | None = None,
    expire_at: int | float | datetime | None = None
)
```

`update` updates an existing item from the database.

#### Parameters

| Name        | Type                                 | Description                                                                                                                                                                                                        |
| ----------- | ------------------------------------ | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ |
| `updates`   | `dict`                               | A dictionary describing the updates on the item.                                                                                                                                                                   |
| `key`       | `str`                                | The key of the item to be updated.                                                                                                                                                                                 |
| `expire_in` | `int` or `None`                      | Seconds after which the item will expire in, see also [expiring items](./expiring_items).                                                                                                                          |
| `expire_at` | `int`, `float`, `datetime` or `None` | Time at which the item will expire in, can provide the timestamp directly (`int` or `float`) or a [datetime](https://docs.python.org/3/library/datetime.html) object, see also [expiring items](./expiring_items). |

#### Update operations

##### Set

`Set` is practiced through normal key-value pairs.
The operation changes the values of the attributes provided in the dictionary if the attribute already exists.
If not, it adds the attribute to the item with the corresponding value.

##### Increment

`<base instance>.util.increment(value)` increments the value of an attribute.
The provided value can be any positive or negative integer.
The attribute's value _must be a number_.
The default value is `1`.

##### Append

`<base instance>.util.append(value)` appends to a list.
The value can be a primitive type or a `list`.

##### Prepend

`<base instance>.util.prepend(value)` prepends to a list.
The value can be a primitive type or a `list`.

##### Trim

`<base instance>.util.trim()` removes an attribute from the item.

#### Returns

If the item is updated, returns `None`. Otherwise, an exception is raised.

### Fetch

Fetch retrieves a list of items matching a query. It will retrieve everything if no query is provided.

A query is composed of a single [query](/docs/en/reference/base/queries) object or a list of [queries](/docs/en/reference/base/queries).
In the case of a list, the indvidual queries are OR'ed.

**`fetch(query=None, limit=1000, last=None):`**

##### Parameters

- **query**: is a single [query object (`dict`)](/docs/en/reference/base/queries) or list of queries. If omitted, you will get all the items in the database (up to 1mb or max 1000 items).
- **limit**: the limit of the number of items you want to retreive, min value `1` if used
- **last**: the last key seen in a previous paginated response

> Upto 1 MB of data is retrieved before filtering with the query. Thus, in some cases you might get an empty list of items but still the `last` key evaluated in the response.
>
> To apply the query through all the items in your base, you have to call fetch until `last` is empty.

##### Returns

Returns an instance of a `FetchResponse` class which has the following properties.

- `count` : The number of items in the response.
- `last`: The last key seen in the fetch response. If `last` is not `None` further items are to be retreived
- `items`: The list of items retreived.
