---
title: Base
position: 0
layout: "@docs"
---

## Base

```py
def Base(name: str, host: str | None = None):
```

The `Base` class provides methods to interact with a Deta Base.

| Parameter | Type            | Description           |
| --------- | --------------- | --------------------- |
| `name`    | `str`           | The name of the Base. |
| `host`    | `str` \| `None` | The host of the Base. |

> ℹ️ Deta Bases are automatically created for you when you start using them.

### Put

```py
def put(
    data: dict | list | str | int | float | bool,
    key: str | None = None,
    *,
    expire_in: int | None = None,
    expire_at: int | float | datetime | None = None,
) -> dict:
```

`put` is the fastest way to store an item in a Base.
If an item already exists under the given key, it will be replaced.
In the case you do not provide a key, Base will automatically generate a 12-character string as a key.

| Parameter   | Type                                                              | Description                                                                       |
| ----------- | ----------------------------------------------------------------- | --------------------------------------------------------------------------------- |
| `data`      | `dict` \| `list` \| `str` \| [`int`][1] \| [`float`][1] \| `bool` | The data to be stored.                                                            |
| `key`       | `str` \| `None`                                                   | The key (aka ID) to store the data under. Will be auto generated if not provided. |
| `expire_in` | `int` \| `None`                                                   | Seconds after which the item will expire in, see [expiring items][2].             |
| `expire_at` | `int` \| `float` \| `datetime` \| `None`                          | Time at which the item will expire, see [expiring items][2].                      |

Returns a `dict` with the item's data.
If `key` is not a non-empty string, raises a `ValueError`.
If the operation did not complete successfully, raises an `Exception`.

> ℹ️ Numbers in Base have [some limits][1].

### Get

```py
def get(key: str) -> dict | None:
```

Retrieves an item by its key.

| Parameter | Type  | Description                      |
| --------- | ----- | -------------------------------- |
| `key`     | `str` | The key of the item to retrieve. |

If the item is found, returns a `dict` with the item's data.
Otherwise, returns `None`.
If `key` is not a non-empty string, raises a `ValueError`.

### Delete

```py
def delete(key: str):
```

Deletes an item by its key.

| Parameter | Type  | Description                    |
| --------- | ----- | ------------------------------ |
| `key`     | `str` | The key of the item to delete. |

Always returns `None`, even if the key does not exist.
If `key` is not a non-empty string, raises a `ValueError`.

### Insert

```py
def insert(
    data: dict | list | str | int | float | bool,
    key: str | None = None,
    *,
    expire_in: int | None = None,
    expire_at: int | float | datetime | None = None,
) -> dict:
```

Inserts a single item, but is different from [`put`](#put) in that it will throw an error of the key already exists in the Base.

> ℹ️ `insert` is roughly 2 times slower than [`put`](#put).

| Parameter   | Type                                                              | Description                                                                       |
| ----------- | ----------------------------------------------------------------- | --------------------------------------------------------------------------------- |
| `data`      | `dict` \| `list` \| `str` \| [`int`][1] \| [`float`][1] \| `bool` | The data to be stored.                                                            |
| `key`       | `str` \| `None`                                                   | The key (aka ID) to store the data under. Will be auto generated if not provided. |
| `expire_in` | `int` \| `None`                                                   | Seconds after which the item will expire in, see [expiring items][2].             |
| `expire_at` | `int` \| `float` \| `datetime` \| `None`                          | Time at which the item will expire, see [expiring items][2].                      |

Returns a `dict` with the item's data.
If `key` already exists, raises an `Exception`.
If `key` is not a non-empty string, raises a `ValueError`.
If the operation did not complete successfully, raises an `Exception`.

### Put Many

```py
def put_many(
    items: list,
    *,
    expire_in: int | None = None,
    expire_at: int | float | datetime | None = None,
) -> dict:
```

Puts up to 25 items at once with a single call.

| Parameter   | Type                                     | Description                                                           |
| ----------- | ---------------------------------------- | --------------------------------------------------------------------- |
| `items`     | `list`                                   | The list of items to be stored.                                       |
| `expire_in` | `int` \| `None`                          | Seconds after which the item will expire in, see [expiring items][2]. |
| `expire_at` | `int` \| `float` \| `datetime` \| `None` | Time at which the item will expire, see [expiring items][2].          |

Returns a dict with `processed` and `failed` (if any) items.

### Update

```py
def update(
    updates: dict,
    key: str,
    *,
    expire_in: int | None = None,
    expire_at: int | float | datetime | None = None
)
```

Updates an existing item.

| Parameter   | Type                                     | Description                                                           |
| ----------- | ---------------------------------------- | --------------------------------------------------------------------- |
| `updates`   | `dict`                                   | A dictionary describing the updates on the item.                      |
| `key`       | `str`                                    | The key of the item to be updated.                                    |
| `expire_in` | `int` \| `None`                          | Seconds after which the item will expire in, see [expiring items][2]. |
| `expire_at` | `int` \| `float` \| `datetime` \| `None` | Time at which the item will expire, see [expiring items][2].          |

If the item is updated, returns `None`. Otherwise, an exception is raised.

#### Update operations

Setting values is practiced through normal key-value pairs.
The operation changes the values of the attributes provided in the dictionary if the attribute already exists.
If not, it adds the attribute to the item with the corresponding value.

Other operations are implemented through methods in the [`Util`](#util) class, accessible through the `util` attribute of a `Base` instance.

### Fetch

```py
def fetch(
    self,
    query: Mapping | Sequence[Mapping] | None = None,
    *,
    limit: int = 1000,
    last: str | None = None,
) -> FetchResponse:
```

Retrieves a list of items matching a query. It will retrieve everything if no query is provided, up to a limit of 1 MB or 1000 items.

A query is composed of a single [query object](/docs/en/reference/base/queries) or a list of query objects.
In the case of a list, the indvidual queries are OR'ed.

> ℹ️ Up to 1 MB of data is retrieved _before_ filtering with the query.
> Thus, in some cases you might get an empty list of items and a `last` key in the response.
> To apply the query through all the items in your Base, you have to call `fetch` until `last` is empty.

| Parameter | Type                             | Description                                                          |
| --------- | -------------------------------- | -------------------------------------------------------------------- |
| `query`   | `Mapping` \| `Sequence[Mapping]` | The query to filter the items by.                                    |
| `limit`   | `int`                            | The maximum number of items you want to retreive, minimum value `1`. |
| `last`    | `str` \| `None`                  | The last key seen in a previous paginated response.                  |

Returns an instance of [`FetchResponse`](#fetchresponse).

## FetchResponse

The `FetchResponse` class describes the response of the [`fetch`](#fetch) method.

| Attribute | Type            | Description                                                                                        |
| -------- | --------------- | -------------------------------------------------------------------------------------------------- |
| `count`  | `int`           | The number of items in the response.                                                               |
| `last`   | `str` \| `None` | The last key seen in the fetch response. If `last` is not `None` further items are to be retreived |
| `items`  | `list`          | The list of items retreived.                                                                       |

## Util

The `util` attribute of a Base instance is an instance of the [`Util`](#util) class.
It provides utility methods to be used in [update operations](#update-operations).

### Increment

```py
def increment(value: int | float = 1):
```

Increments the value of an attribute.
The provided value can be any positive or negative integer.
The attribute's value _must be a number_.
The default value is `1`.

### Append

```py
def append(value: dict | list | str | int | float | bool):
```

Appends to a list.
The value can be a primitive type or a `list`.

### Prepend

```py
def prepend(value: dict | list | str | int | float | bool):
```

Prepends to a list.
The value can be a primitive type or a `list`.

### Trim

```py
def trim():
```

Removes an attribute from the item.

[1]: /docs/en/reference/base/about#storing-numbers "Storing numbers"
[2]: /docs/en/reference/base/expiring_items "Expiring items"
